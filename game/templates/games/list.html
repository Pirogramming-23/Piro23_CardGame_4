{% extends 'games/base.html' %} {% block content %}
<div class="history-list">

 <h2>ê²Œì„ ì „ì  ë¦¬ìŠ¤íŠ¸</h2>
  <p>í˜„ì¬ í”Œë ˆì´ì–´: <strong>{{ user.username }}</strong></p>
  <ul>
    {% for game in games %}
    <li>
      <span>
        <a
          href="{% url 'game_detail' game.id %}"
          style="color: #ffd369; font-weight: bold; text-decoration: underline"
>
          {{ game.attacker }} VS {{ game.defender }}
        </a>
        {% if game.status == 'ì§„í–‰ì¤‘' and game.attacker == user %}
        <span style="display: inline-block; width: 180px; text-align: center">ì§„í–‰ ì¤‘ (ë‚´ê°€ ê³µê²©)</span>

        <form method="post" style="display: inline">
          {% csrf_token %}
          <button type="submit" class="game-info-btn">ê²Œì„ ì·¨ì†Œ</button>
        </form>

        
        {% elif game.status == 'ë°˜ê²©ëŒ€ê¸°' or game.status == 'ì§„í–‰ì¤‘' and game.defender == user %}
        <span style="display: inline-block; width: 180px; text-align: center">ë°˜ê²© ëŒ€ê¸° (ë‚´ê°€ ìˆ˜ë¹„)</span>
        <form method="get" action="{% url 'game_detail' game.id %}" style="display: inline">
          <button type="submit" class="game-info-btn">ë°˜ê²©í•˜ê¸°</button>
        </form>

        {% elif game.status == 'ì¢…ë£Œ' %}
        <span style="display: inline-block; width: 180px; text-align: center">
            ê²°ê³¼: {% if user == game.attacker %} {% if game.result == 'ìŠ¹ë¦¬'%}ğŸ‘‘ìŠ¹ë¦¬ğŸ‘‘
            {% elif game.result == 'íŒ¨ë°°' %}ğŸ˜¢íŒ¨ë°°ğŸ˜¢ {% else %}ë¬´ìŠ¹ë¶€{% endif %} 
            {% else %} {% if game.result == 'ìŠ¹ë¦¬' %}ğŸ˜¢íŒ¨ë°°ğŸ˜¢{% elif game.result == 'íŒ¨ë°°'%}ğŸ‘‘ìŠ¹ë¦¬ğŸ‘‘{% else %}ë¬´ìŠ¹ë¶€{% endif %} {% endif %}
        </span>
        {% endif %}

      </span>
      <a href="{% url 'game_detail' game.id %}" class="game-info-btn">ê²Œì„ì •ë³´</a>
    </li>
    {% empty %}
    <li>ê²Œì„ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
